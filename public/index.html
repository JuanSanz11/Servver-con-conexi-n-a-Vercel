<!-- public/index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="style.css">

  <title>Solicitar Nombre e ID</title>
</head>
<body>

  <div class="icon">
  <img src="/back.svg" alt="Icono personalizado" width="50" height="50" color="white">
</div>

  <h2>Obtener datos del servidor</h2>
  <button id="fetchBtn">Solicitar</button>
  <div id="result"></div>

  <h3>Agregar nuevo usuario</h3>
<form id="userForm">
  <input type="text" id="newId" placeholder="ID" required />
  <input type="text" id="newName" placeholder="Nombre" required />
  <button type="submit">Crear usuario</button>
</form>
<div id="createResult"></div>

<h3>Eliminar usuario por ID</h3>
<form id="deleteForm">
  <input type="text" id="deleteId" placeholder="ID a eliminar" required />
  <button type="submit">Eliminar usuario</button>
</form>
<div id="deleteResult"></div>
</body>
 <script>
  document.getElementById("fetchBtn").addEventListener("click", async () => {
    try {
      const response = await fetch("https://servver-con-conexi-n-a-vercel.vercel.app/api/users");
      const data = await response.json();
      const resultado = data.map(user => `Nombre: ${user.name}, ID: ${user.id}`).join("<br>");
      document.getElementById("result").innerHTML = resultado;
    } catch (error) {
      document.getElementById("result").innerText = "Error al obtener los datos.";
      console.error(error);
    }
  });

  document.getElementById("userForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const id = document.getElementById("newId").value;
  const name = document.getElementById("newName").value;

  try {
    const response = await fetch("https://servver-con-conexi-n-a-vercel.vercel.app/api/users", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ id, name })
    });

    const result = await response.json();
    document.getElementById("createResult").innerText = `‚úÖ Usuario creado: ${result.name} (ID: ${result.id})`;
  } catch (error) {
    document.getElementById("createResult").innerText = "‚ùå Error al crear usuario.";
    console.error(error);
  }
});

document.getElementById("deleteForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const id = document.getElementById("deleteId").value;

  try {
    const response = await fetch(`https://servver-con-conexi-n-a-vercel.vercel.app/api/users/${id}`, {
      method: "DELETE"
    });

    if (response.ok) {
  const result = await response.json();
  document.getElementById("deleteResult").innerText = `üóëÔ∏è Usuario eliminado: ${result.user.name} (ID: ${result.user.id})`;
} else {
  const text = await response.text();
  document.getElementById("deleteResult").innerText = `‚ùå Error: ${response.status} - ${text}`;
}
  } catch (error) {
    document.getElementById("deleteResult").innerText = "‚ùå Error al eliminar usuario.";
    console.error(error);
  }
});


</script>

</html>
